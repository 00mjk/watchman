<html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>watchman | A file watching service</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="watchman | A file watching service"><meta property="og:type" content="website"><meta property="og:url" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;index.html"><meta property="og:image" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;favicon.png"><meta property="og:description" content="A file watching service"><link rel="shortcut icon" href="&#x2f;watchman&#x2f;img&#x2f;favicon.png"><link rel="stylesheet" href="&#x2f;watchman&#x2f;css&#x2f;watchman.css"><script type="text&#x2f;javascript" src="&#x2f;&#x2f;use.typekit.net&#x2f;vqa1hcx.js"></script><script type="text&#x2f;javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="&#x2f;watchman&#x2f;">watchman</a><ul class="nav-site"><li><a href="&#x2f;watchman&#x2f;docs&#x2f;install.html" class="active">docs</a></li><li><a href="&#x2f;watchman&#x2f;support.html" class="">support</a></li><li><a href="http:&#x2f;&#x2f;github.com&#x2f;facebook&#x2f;watchman" class="">github</a></li></ul></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-section"><h3>Installation</h3><ul><li><a style="margin-left:0;" class="active" href="&#x2f;watchman&#x2f;docs&#x2f;install.html">Installation</a></li></ul></div><div class="nav-docs-section"><h3>Invocation</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cli-options.html">Command Line</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;config.html">Configuration Files</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;socket-interface.html">Socket Interface</a></li></ul></div><div class="nav-docs-section"><h3>Commands</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;clock.html">clock</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;find.html">find</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-config.html">get-config</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-sockname.html">get-sockname</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log.html">log</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log-level.html">log-level</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;query.html">query</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;shutdown-server.html">shutdown-server</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;since.html">since</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;subscribe.html">subscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger.html">trigger</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-del.html">trigger-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-list.html">trigger-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;unsubscribe.html">unsubscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;version.html">version</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch.html">watch</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-del.html">watch-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-del-all.html">watch-del-all</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-list.html">watch-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-project.html">watch-project</a></li></ul></div><div class="nav-docs-section"><h3>Queries</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;clockspec.html">Clockspec</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;file-query.html">File Queries</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;simple-query.html">Simple Pattern Syntax</a></li></ul></div><div class="nav-docs-section"><h3>Internals</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;bser.html">BSER Binary Protocol</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;casefolding.html">Case-Insensitivity</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;contributing.html">Contributing</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cookies.html">Query Synchronization</a></li></ul></div><div class="nav-docs-section"><h3>Troubleshooting</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;troubleshooting.html">Troubleshooting</a></li></ul></div></div><div class="inner-content"><h1>Installation</h1><div><h2><a class="anchor" name="system-requirements"></a>System Requirements <a class="hash-link" href="#system-requirements">#</a></h2><p>Watchman is known to compile and pass its test suite on:</p><ul><li>Linux systems with <code>inotify</code></li><li>OS X (uses FSEvents)</li><li>BSDish systems (FreeBSD 9.1, OpenBSD 5.2) that have the
<code>kqueue(2)</code> facility</li><li>Illumos and Solaris style systems that have <code>port_create(3C)</code></li></ul><p>Watchman relies on the operating system facilities for file notification,
which means that you will likely have very poor results using it on any
kind of remote or distributed filesystem.</p><p>Watchman does not currently support Windows or any other operating system
not covered by the list above.</p><h2><a class="anchor" name="build-install"></a>Build&#x2f;Install <a class="hash-link" href="#build-install">#</a></h2><h3><a class="anchor" name="installing-on-os-x-via-homebrew"></a>Installing on OS X via Homebrew <a class="hash-link" href="#installing-on-os-x-via-homebrew">#</a></h3><p>To build the most recent release currently tracked by
<a href="http:&#x2f;&#x2f;brew.sh&#x2f;" target="_blank">Homebrew</a>:</p><div class="prism language-javascript">$ brew update
$ brew install watchman</div><p>To install the latest build from github:</p><div class="prism language-javascript">$ brew install <span class="token operator">--</span>HEAD watchman</div><h3><a class="anchor" name="installing-on-os-x-via-macports"></a>Installing on OS X via macports <a class="hash-link" href="#installing-on-os-x-via-macports">#</a></h3><p>To install the package maintained by <a href="https:&#x2f;&#x2f;www.macports.org" target="_blank">MacPorts</a>:</p><div class="prism language-javascript">$ sudo port install watchman</div><h3><a class="anchor" name="installing-from-source"></a>Installing from source <a class="hash-link" href="#installing-from-source">#</a></h3><p>You can use these steps below to get watchman built.  You will need <code>autoconf</code>
and <code>automake</code>.  You may optionally build watchman with <code>pcre</code> and <code>python</code>
support.  See below for some more information on options to configure your
build.</p><div class="prism language-javascript">$ git clone https<span class="token punctuation">:</span><span class="token operator">&#x2f;</span><span class="token operator">&#x2f;</span>github<span class="token punctuation">.</span>com<span class="token operator">&#x2f;</span>facebook<span class="token operator">&#x2f;</span>watchman<span class="token punctuation">.</span>git
$ cd watchman
$ <span class="token punctuation">.</span><span class="token operator">&#x2f;</span>autogen<span class="token punctuation">.</span>sh
$ <span class="token punctuation">.</span><span class="token operator">&#x2f;</span>configure
$ make
$ sudo make install</div><h4><a class="anchor" name="compile-time-configuration-options"></a>Compile Time Configuration Options <a class="hash-link" href="#compile-time-configuration-options">#</a></h4><p>Our configure script accepts all the standard options, but there are a couple
that are specific to watchman that might be relevant to your needs:</p><div class="prism language-javascript"><span class="token operator">--</span>enable<span class="token operator">-</span>conffile<span class="token operator">=</span>PATH  Use PATH as the default configuration file name<span class="token punctuation">.</span>
                        Default is <span class="token operator">&#x2f;</span>etc<span class="token operator">&#x2f;</span>watchman<span class="token punctuation">.</span>json

<span class="token operator">--</span>enable<span class="token operator">-</span>statedir<span class="token operator">=</span>PATH  Use PATH as the default <span class="token keyword">for</span> state<span class="token punctuation">,</span> log files
                        and sockets instead of using your system tempdir

<span class="token operator">--</span>enable<span class="token operator">-</span>lenient  Turn off more pedantic levels of warnings
                  and compilation checks

<span class="token operator">--</span>enable<span class="token operator">-</span>stack<span class="token operator">-</span>protector  Enable stack protection <span class="token keyword">in</span> the same
                          way that rpmbuild does on some systems<span class="token punctuation">.</span>

<span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>buildinfo<span class="token operator">=</span>TEXT   Include some extra build information that will
                        be reported <span class="token keyword">in</span> the version command output

<span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>python        Enable python bindings

<span class="token operator">--</span>without<span class="token operator">-</span>pcre       Don&#x27;t enable pcre support<span class="token punctuation">.</span>
<span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>pcre<span class="token operator">=</span>PATH     Enable pcre support<span class="token punctuation">.</span>  PATH is location of pcre<span class="token operator">-</span>config<span class="token punctuation">.</span>
                     Default is to enable and look <span class="token keyword">for</span> pcre<span class="token operator">-</span>config <span class="token keyword">in</span> your
                     $PATH

<span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>gimli    Enable support <span class="token keyword">for</span> the gimli process monitor
                https<span class="token punctuation">:</span><span class="token operator">&#x2f;</span><span class="token operator">&#x2f;</span>bitbucket<span class="token punctuation">.</span>org<span class="token operator">&#x2f;</span>wez<span class="token regex">&#x2f;gimli&#x2f;</span></div><p>(Run <code>.&#x2f;configure --help</code> to get the list for the version you checked out)</p><h3><a class="anchor" name="travis-ci"></a>Travis CI <a class="hash-link" href="#travis-ci">#</a></h3><p>We use Travis Continuous Integration to build out every revision and
pull-request to make sure that it we don&#x27;t accidentally break things.  The
current build status is:</p><p><a href="https:&#x2f;&#x2f;travis-ci.org&#x2f;facebook&#x2f;watchman" target="_blank"><img src="https:&#x2f;&#x2f;travis-ci.org&#x2f;facebook&#x2f;watchman.svg?branch=master" alt="Build Status"></a></p><h2><a class="anchor" name="system-specific-preparation"></a>System Specific Preparation <a class="hash-link" href="#system-specific-preparation">#</a></h2><h3><a class="anchor" name="linux-inotify-limits"></a>Linux inotify Limits <a class="hash-link" href="#linux-inotify-limits">#</a></h3><p>The <code>inotify(7)</code> subsystem has three important tunings that impact watchman.</p><ul><li><code>&#x2f;proc&#x2f;sys&#x2f;fs&#x2f;inotify&#x2f;max_user_instances</code> impacts how many different
root dirs you can watch.</li><li><code>&#x2f;proc&#x2f;sys&#x2f;fs&#x2f;inotify&#x2f;max_user_watches</code> impacts how many dirs you
can watch across all watched roots.</li><li><code>&#x2f;proc&#x2f;sys&#x2f;fs&#x2f;inotify&#x2f;max_queued_events</code> impacts how likely it is that
your system will experience a notification overflow.</li></ul><p>You obviously need to ensure that <code>max_user_instances</code> and <code>max_user_watches</code>
are set so that the system is capable of keeping track of your files.</p><p><code>max_queued_events</code> is important to size correctly; if it is too small, the
kernel will drop events and watchman won&#x27;t be able to report on them.  Making
this value bigger reduces the risk of this happening.</p><p>Watchman has two simple strategies for mitigating an overflow of
<code>max_queued_events</code>:</p><ul><li>It uses a dedicated thread to consume kernel events as quickly as possible</li><li>When the kernel reports an overflow, watchman will assume that all the files
have been modified and will re-crawl the directory tree as though it had just
started watching the dir.</li></ul><p>This means that if an overflow does occur, you won&#x27;t miss a legitimate change
notification, but instead will get spurious notifications for files that
haven&#x27;t actually changed.</p></div><div class="docs-prevnext"></div></div></section><footer class="wrap"><div class="right">© 2012-2015 Facebook Inc.</div></footer></div><div id="fb-root"></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-387204-10', 'facebook.github.io');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
          </script></body></html>