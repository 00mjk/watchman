<html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>watchman | A file watching service</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="watchman | A file watching service"><meta property="og:type" content="website"><meta property="og:url" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;index.html"><meta property="og:image" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;favicon.png"><meta property="og:description" content="A file watching service"><link rel="shortcut icon" href="&#x2f;watchman&#x2f;img&#x2f;favicon.png"><link rel="stylesheet" href="&#x2f;watchman&#x2f;css&#x2f;watchman.css"><script type="text&#x2f;javascript" src="&#x2f;&#x2f;use.typekit.net&#x2f;vqa1hcx.js"></script><script type="text&#x2f;javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="&#x2f;watchman&#x2f;">watchman</a><ul class="nav-site"><li><a href="&#x2f;watchman&#x2f;docs&#x2f;install.html" class="active">docs</a></li><li><a href="&#x2f;watchman&#x2f;support.html" class="">support</a></li><li><a href="http:&#x2f;&#x2f;github.com&#x2f;facebook&#x2f;watchman" class="">github</a></li></ul></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-section"><h3>Installation</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;install.html">Installation</a></li></ul></div><div class="nav-docs-section"><h3>Invocation</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cli-options.html">Command Line</a></li><li><a style="margin-left:0;" class="active" href="&#x2f;watchman&#x2f;docs&#x2f;config.html">Configuration Files</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;socket-interface.html">Socket Interface</a></li></ul></div><div class="nav-docs-section"><h3>Commands</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;clock.html">clock</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;find.html">find</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-config.html">get-config</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-sockname.html">get-sockname</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log.html">log</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log-level.html">log-level</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;query.html">query</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;shutdown-server.html">shutdown-server</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;since.html">since</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;subscribe.html">subscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger.html">trigger</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-del.html">trigger-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-list.html">trigger-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;unsubscribe.html">unsubscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;version.html">version</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch.html">watch</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-del.html">watch-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-list.html">watch-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-project.html">watch-project</a></li></ul></div><div class="nav-docs-section"><h3>Queries</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;clockspec.html">Clockspec</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;file-query.html">File Queries</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;simple-query.html">Simple Pattern Syntax</a></li></ul></div><div class="nav-docs-section"><h3>Internals</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;bser.html">BSER Binary Protocol</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;casefolding.html">Case-Insensitivity</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;contributing.html">Contributing</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cookies.html">Query Synchronization</a></li></ul></div><div class="nav-docs-section"><h3>Troubleshooting</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;troubleshooting.html">Troubleshooting</a></li></ul></div></div><div class="inner-content"><h1>Configuration Files</h1><div><p>Watchman looks for configuration files in two places:</p><ul><li>The global configuration file <code>&#x2f;etc&#x2f;watchman.json</code></li><li>The root specific configuration file <code>.watchmanconfig</code></li></ul><p>When watching a root, if a valid JSON file named <code>.watchmanconfig</code> is present
in the root directory, watchman will load it and use it as a source of
configuration information specific to that root.</p><p>The global configuration path can be changed by passing the
<code>--enable-conffile</code> option to configure when you build watchman.  This
documentation refers to it as <code>&#x2f;etc&#x2f;watchman.json</code> throughout, just be aware
that your particular installation may locate it elsewhere.   In addition,
the environmental variable <code>$WATCHMAN_CONFIG_FILE</code> will override the
default location.</p><p>Changes to the <code>.watchmanconfig</code> or <code>&#x2f;etc&#x2f;watchman.json</code> files are not picked
up automatically; you will need to remove and re-add the watch (for
<code>.watchmanconfig</code>) or restart watchman (for <code>&#x2f;etc&#x2f;watchman.json</code>) for those
changes to take effect.</p><h3><a class="anchor" name="resolution-scoping"></a>Resolution &#x2f; Scoping <a class="hash-link" href="#resolution-scoping">#</a></h3><p>There are three configuration scopes:</p><ul><li><strong>local</strong> - the option value is read from the <code>.watchmanconfig</code> file in the
associated root.</li><li><strong>global</strong> - the option value is read from the <code>&#x2f;etc&#x2f;watchman.json</code> file</li><li><strong>fallback</strong> - the option value is read from the <code>.watchmanconfig</code> file.
If the option was not present in the <code>.watchmanconfig</code> file, then read
it from the <code>&#x2f;etc&#x2f;watchman.json</code> file.</li></ul><p>This table shows the scoping and availability of the various options:</p><table><thead><tr><th>Option</th><th>Scope</th><th>Since version</th></tr></thead><thead><tr><td><code>settle</code></td><td>local</td><td></td></tr><tr><td><code>root_restrict_files</code></td><td>global</td><td>deprecated in 3.1</td></tr><tr><td><code>root_files</code></td><td>global</td><td>3.1</td></tr><tr><td><code>enforce_root_files</code></td><td>global</td><td>3.1</td></tr><tr><td><code>illegal_fstypes</code></td><td>global</td><td>2.9.8</td></tr><tr><td><code>illegal_fstypes_advice</code></td><td>global</td><td>2.9.8</td></tr><tr><td><code>ignore_vcs</code></td><td>local</td><td>2.9.3</td></tr><tr><td><code>ignore_dirs</code></td><td>local</td><td>2.9.3</td></tr><tr><td><code>gc_age_seconds</code></td><td>local</td><td>2.9.4</td></tr><tr><td><code>gc_interval_seconds</code></td><td>local</td><td>2.9.4</td></tr></thead></table><h3><a class="anchor" name="configuration-options"></a>Configuration Options <a class="hash-link" href="#configuration-options">#</a></h3><h4><a class="anchor" name="settle"></a>settle <a class="hash-link" href="#settle">#</a></h4><p>Specifies the settle period in <em>milliseconds</em>.  This controls how long the
filesystem should be idle before dispatching triggers.  The default value is 20
milliseconds.</p><h4><a class="anchor" name="root-files"></a>root_files <a class="hash-link" href="#root-files">#</a></h4><p>Available starting in version 3.1</p><p>Specifies a list of files that, if present in a directory, identify that
directory as the root of a project.</p><p>If left unspecified, to aid in transitioning between versions, watchman will
use the value of the now deprecated
<a href="#root_restrict_files" target="">root_restrict_files</a> configuration setting.</p><p>If neither <code>root_files</code> nor <code>root_restrict_files</code> is specified in the
configuration, watchman will use a default value consisting of:</p><ul><li><code>.git</code></li><li><code>.hg</code></li><li><code>.svn</code></li><li><code>.watchmanconfig</code></li></ul><p>Watchman will add <code>.watchmanconfig</code> to whatever value is specified for
this configuration value if it is not present.</p><p>This example causes only <code>.watchmanconfig</code> to be considered as a project
root file:</p><div class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;root_files&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.watchmanconfig&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></div><p>See the <a href="cmd&#x2f;watch-project.html" target="_blank">watch-project</a> command for more information.</p><h4><a class="anchor" name="enforce-root-files"></a>enforce_root_files <a class="hash-link" href="#enforce-root-files">#</a></h4><p>Available starting in version 3.1</p><p>This is a boolean option that defaults to <code>false</code>.  If it is set to <code>true</code>
then the <a href="cmd&#x2f;watch.html" target="_blank">watch</a> command will only succeed if the requested
directory contains one of the files listed by the <a href="#root_files" target="">root_files</a>
configuration option, and the <a href="cmd&#x2f;watch-project.html" target="_blank">watch-project</a> command
will only succeed if a valid project root is found.</p><p>If left unspecified, to aid in transitioning between versions, watchman will
check to see if the now deprecated <a href="#root_restrict_files" target="">root_restrict_files</a>
configuration setting is present.  If it is found then the effective value of
<code>enforce_root_files</code> is set to <code>true</code>.</p><h4><a class="anchor" name="root-restrict-files"></a>root_restrict_files <a class="hash-link" href="#root-restrict-files">#</a></h4><p>Deprecated starting in version 3.1; use <a href="#root_files" target="">root_files</a> and
<a href="#enforce_root_files" target="">enforce_root_files</a> to effect the same behavior.</p><p>Specifies a list of files, at least one of which should be present in a
directory for watchman to add it as a root. By default there are no
restrictions.</p><p>For example,</p><div class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;root_restrict_files&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.git&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.hg&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></div><p>will allow watches only in the top level of Git or Mercurial repositories.</p><h4><a class="anchor" name="illegal-fstypes"></a>illegal_fstypes <a class="hash-link" href="#illegal-fstypes">#</a></h4><p>Specifies a list of filesystem types that watchman is prohibited to attempt to
watch.  Watchman will determine the filesystem type of the root of a watch; if
the typename is present in the <code>illegal_fstypes</code> list, the watch will be
prohibited.  You may also specify <code>illegal_fstypes_advice</code> as a string with
additional advice to your user.  The purpose of this configuration option is
largely to prevent the use of Watchman on network mounted filesystems.  On
Linux systems, Watchman may not be able to determine the precise type name of a
mounted filesystem.  If the filesystem type is not known to watchman, it will
be reported as <code>unknown</code>.</p><p>For example,</p><div class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;illegal_fstypes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;nfs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cifs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;smb&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;illegal_fstypes_advice&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;use a local directory&quot;</span>
<span class="token punctuation">}</span></div><p>will prevent watching dirs mounted on network filesystems and provide the
advice to use a local directory.  You may omit the <code>illegal_fstypes_advice</code>
setting to use a default suggestion to relocate the directory to local disk.</p><h4><a class="anchor" name="ignore-vcs"></a>ignore_vcs <a class="hash-link" href="#ignore-vcs">#</a></h4><p>Apply special VCS ignore logic to the set of named dirs.  This option has a
default value of <code>[&quot;.git&quot;, &quot;.hg&quot;, &quot;.svn&quot;]</code>.  Dirs that match this option are
observed and watched using special shallow logic.  The shallow watch allows
watchman to mildly abuse the version control directories to store its query
cookie files and to observe VCS locking activity without having to watch the
entire set of VCS data for large trees.</p><h4><a class="anchor" name="ignore-dirs"></a>ignore_dirs <a class="hash-link" href="#ignore-dirs">#</a></h4><p>Dirs that match are completely ignored by watchman.  This is useful to ignore a
directory that contains only build products and where file change notifications
are unwanted because of the sheer volume of files.</p><p>For example,</p><div class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;ignore_dirs&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;build&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></div><p>would ignore the <code>build</code> directory at the top level of the watched tree, and
everything below it.  It will never appear in the watchman query results for
the tree.</p><p>Since version 2.9.9, if you list a dir in <code>ignore_dirs</code> that is also listed in
<code>ignore_vcs</code>, the <code>ignore_dirs</code> placement will take precedence.  This may not
sound like a big deal, but since <code>ignore_vcs</code> is used as a hint to for the
placement of <a href="&#x2f;watchman&#x2f;docs&#x2f;cookies.html" target="">cookie files</a>, having these two
options overlap in earlier versions would break watchman queries.</p><h4><a class="anchor" name="gc-age-seconds"></a>gc_age_seconds <a class="hash-link" href="#gc-age-seconds">#</a></h4><p>Deleted files (and dirs) older than this are periodically pruned from the
internal view of the filesystem.  Until they are pruned, they will be visible
to queries but will have their <code>exists</code> field set to <code>false</code>.   Once they are
pruned, watchman will remember the most recent clock value of the pruned nodes.
Any since queries based on a clock prior to the last prune clock will be
treated as a fresh instance query.  This allows a client to detect and choose
how to handle the case where they have missed changes.  See <code>is_fresh_instance</code>
elsewhere in this document for more information.  The default for this is
<code>43200</code> (12 hours).</p><h4><a class="anchor" name="gc-interval-seconds"></a>gc_interval_seconds <a class="hash-link" href="#gc-interval-seconds">#</a></h4><p>How often to check for, and prune out, deleted nodes per the <code>gc_age_seconds</code>
option description above.  The default for this is <code>86400</code> (24 hours).  Set
this to <code>0</code> to disable the periodic pruning operation.</p></div><div class="docs-prevnext"></div></div></section><footer class="wrap"><div class="right">© 2012-2015 Facebook Inc.</div></footer></div><div id="fb-root"></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-387204-10', 'facebook.github.io');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
          </script></body></html>