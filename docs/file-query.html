<html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>watchman | A file watching service</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="watchman | A file watching service"><meta property="og:type" content="website"><meta property="og:url" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;index.html"><meta property="og:image" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;favicon.png"><meta property="og:description" content="A file watching service"><link rel="shortcut icon" href="&#x2f;watchman&#x2f;img&#x2f;favicon.png"><link rel="stylesheet" href="&#x2f;watchman&#x2f;css&#x2f;watchman.css"><script type="text&#x2f;javascript" src="&#x2f;&#x2f;use.typekit.net&#x2f;vqa1hcx.js"></script><script type="text&#x2f;javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="&#x2f;watchman&#x2f;">watchman</a><ul class="nav-site"><li><a href="&#x2f;watchman&#x2f;docs&#x2f;install.html" class="active">docs</a></li><li><a href="&#x2f;watchman&#x2f;support.html" class="">support</a></li><li><a href="http:&#x2f;&#x2f;github.com&#x2f;facebook&#x2f;watchman" class="">github</a></li></ul></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-section"><h3>Installation</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;install.html">Installation</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;release-notes.html">Release Notes</a></li></ul></div><div class="nav-docs-section"><h3>Invocation</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cli-options.html">Command Line</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;config.html">Configuration Files</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;socket-interface.html">Socket Interface</a></li></ul></div><div class="nav-docs-section"><h3>Compatibility</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;compatibility.html">Compatibility Rules</a></li></ul></div><div class="nav-docs-section"><h3>Commands</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;clock.html">clock</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;find.html">find</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-config.html">get-config</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-sockname.html">get-sockname</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log.html">log</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log-level.html">log-level</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;query.html">query</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;shutdown-server.html">shutdown-server</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;since.html">since</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;subscribe.html">subscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger.html">trigger</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-del.html">trigger-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-list.html">trigger-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;unsubscribe.html">unsubscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;version.html">version</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch.html">watch</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-del.html">watch-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-del-all.html">watch-del-all</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-list.html">watch-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-project.html">watch-project</a></li></ul></div><div class="nav-docs-section"><h3>Queries</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;clockspec.html">Clockspec</a></li><li><a style="margin-left:0;" class="active" href="&#x2f;watchman&#x2f;docs&#x2f;file-query.html">File Queries</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;simple-query.html">Simple Pattern Syntax</a></li></ul></div><div class="nav-docs-section"><h3>Internals</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;bser.html">BSER Binary Protocol</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;casefolding.html">Case-Insensitivity</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;contributing.html">Contributing</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cookies.html">Query Synchronization</a></li></ul></div><div class="nav-docs-section"><h3>Troubleshooting</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;troubleshooting.html">Troubleshooting</a></li></ul></div></div><div class="inner-content"><h1>File Queries</h1><div><p>Watchman file queries consist of 1 or more <em>generators</em> that feed files through
the expression evaluator.</p><h3><a class="anchor" name="generators"></a>Generators <a class="hash-link" href="#generators">#</a></h3><p>Watchman provides 4 generators:</p><ul><li><strong>since</strong>: generates a list of files that were modified since a specific
clockspec. If this is not specified, this will be treated the same as if a
clockspec from a different instance of watchman was passed in. You can
use either a string oclock value, or a integer number of epoch seconds.</li><li><strong>suffix</strong>: generates a list of files that have a particular suffix or set
of suffixes.  The value can be either a string or an array of strings.</li><li><strong>path</strong>: generates a list of files based on their path and depth. Depth
controls how far watchman will search down the directory tree for files.
Depth = 0 means only files and directories which are contained in this
path.  The value of path can be either an array, a string, or an object.
If it is a string, it is treated as a path, and depth is infinite.  If
an object, the fields path (a string) and depth (an integer) must be
supplied.  An array can contain either strings or objects, each with the
same meaning as single strings or objects.  Paths are relative to
the root, so if watchman is watching &#x2f;foo&#x2f;, path &quot;bar&quot; refers to &#x2f;foo&#x2f;bar.</li><li><strong>all</strong>: generates a list of all known files</li></ul><p>Generators are analogous to the list of <em>paths</em> that you specify when using the
<code>find(1)</code> utility, but are implemented in watchman with a bit of a twist
because watchman doesn&#x27;t need to crawl the filesystem in realtime and instead
maintains a couple of indexes over the tree.</p><p>A query may specify any number of generators; each generator will emit its list
of files and this may mean that you see the same file output more than once if
you specified the use of multiple generators that all produce the same file.</p><h3><a class="anchor" name="expressions"></a>Expressions <a class="hash-link" href="#expressions">#</a></h3><p>A watchman query expression consists of 0 or more expression terms.  If no
terms are provided then each file evaluated is considered a match (equivalent
to specifying a single <code>true</code> expression term).</p><p>Otherwise, the expression is evaluated against the file and produces a boolean
result.  If that result is true then the file is considered a match and is
added to the output set.</p><p>An expression term is canonically represented as a JSON array whose zeroth
element is a string containing the term name.</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;termname&quot;</span><span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">]</span></div><p>If the term accepts no arguments you may use a short form that consists of just
the term name expressed as a string:</p><div class="prism language-javascript"><span class="token string">&quot;true&quot;</span></div><p>Expressions that match against file names may match against either the
<em>basename</em> or the <em>wholename</em> of the file.  The basename is the name of the
file within its containing directory.  The wholename is the name of the file
relative to the watched root.</p><h4><a class="anchor" name="allof"></a>allof <a class="hash-link" href="#allof">#</a></h4><p>The <code>allof</code> expression term evaluates as true if all of the grouped expressions
also evaluated as true.  For example, this expression matches only files whose
name ends with <code>.txt</code> and that are not empty files:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;allof&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.txt&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;not&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;empty&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span></div><p>Each array element after the term name is evaluated as an expression of its own:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;allof&quot;</span><span class="token punctuation">,</span> expr1<span class="token punctuation">,</span> expr2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> exprN<span class="token punctuation">]</span></div><p>Evaluation of the subexpressions stops at the first one that returns false.</p><h4><a class="anchor" name="anyof"></a>anyof <a class="hash-link" href="#anyof">#</a></h4><p>The <code>anyof</code> expression term evaluates as true if any of the grouped expressions
also evaluated as true.  The following expression matches files whose name ends
with either <code>.txt</code> or <code>.md</code>:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;anyof&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.txt&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.md&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span></div><p>Each array element after the term name is evaluated as an expression of its own:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;anyof&quot;</span><span class="token punctuation">,</span> expr1<span class="token punctuation">,</span> expr2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> exprN<span class="token punctuation">]</span></div><p>Evaluation of the subexpressions stops at the first one that returns true.</p><h4><a class="anchor" name="not"></a>not <a class="hash-link" href="#not">#</a></h4><p>The <code>not</code> expression inverts the result of the subexpression argument:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;not&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;empty&quot;</span><span class="token punctuation">]</span></div><h4><a class="anchor" name="true"></a>true <a class="hash-link" href="#true">#</a></h4><p>The <code>true</code> expression always evaluates as true.</p><div class="prism language-javascript"><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">[</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">]</span></div><h4><a class="anchor" name="false"></a>false <a class="hash-link" href="#false">#</a></h4><p>The <code>false</code> expression always evaluates as false.</p><div class="prism language-javascript"><span class="token string">&quot;false&quot;</span>
<span class="token punctuation">[</span><span class="token string">&quot;false&quot;</span><span class="token punctuation">]</span></div><h4><a class="anchor" name="suffix"></a>suffix <a class="hash-link" href="#suffix">#</a></h4><p>The <code>suffix</code> expression evaluates true if the file suffix matches the second
argument.  This matches files name <code>foo.php</code> and <code>foo.PHP</code> but not <code>foophp</code>:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;suffix&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;php&quot;</span><span class="token punctuation">]</span></div><p>Suffix expression matches are case insensitive.</p><h4><a class="anchor" name="match-and-imatch"></a>match and imatch <a class="hash-link" href="#match-and-imatch">#</a></h4><p>The <code>match</code> expression performs an <code>fnmatch(3)</code> match against the basename of
the file, evaluating true if the match is successful.</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.txt&quot;</span><span class="token punctuation">]</span></div><p>You may optionally provide a third argument to change the scope of the match
from the basename to the wholename of the file.</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;basename&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dir&#x2f;*.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wholename&quot;</span><span class="token punctuation">]</span></div><p><code>match</code> is case sensitive; for case insensitive matching use <code>imatch</code> instead;
it behaves identically to <code>match</code> except that the match is performed ignoring
case.</p><p>Starting in version 2.9.9, on OS X systems where the watched root is a case
insensitive filesystem (this is the common case for OS X), <code>match</code> is equivalent
to <code>imatch</code>.</p><h4><a class="anchor" name="pcre-and-ipcre"></a>pcre and ipcre <a class="hash-link" href="#pcre-and-ipcre">#</a></h4><p>The <code>pcre</code> expression performs a Perl Compatible Regular Expression match
against the basename of the file.  This pattern matches <code>test_plan.php</code> but not
<code>mytest_plan</code>:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;pcre&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;^test_&quot;</span><span class="token punctuation">]</span></div><p>You may optionally provide a third argument to change the scope of the match
from the basename to the wholename of the file.</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;pcre&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;basename&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">&quot;pcre&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wholename&quot;</span><span class="token punctuation">]</span></div><p><code>pcre</code> is case sensitive; for case insensitive matching use <code>ipcre</code> instead;
it behaves identically to <code>pcre</code> except that the match is performed ignoring
case.</p><p>To use this feature, you must configure watchman <code>--with-pcre</code>.</p><p>Starting in version 2.9.9, on OS X systems where the watched root is a case
insensitive filesystem (this is the common case for OS X), <code>pcre</code> is equivalent
to <code>ipcre</code>.</p><h4><a class="anchor" name="name-and-iname"></a>name and iname <a class="hash-link" href="#name-and-iname">#</a></h4><p>The <code>name</code> expression performs exact matches against file names.  By default it
is scoped to the basename of the file:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Makefile&quot;</span><span class="token punctuation">]</span></div><p>You may specify multiple names to match against by setting the second argument
to an array:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Makefile&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span></div><p>This second form can be accelerated and is preferred over an <code>anyof</code>
construction.</p><p>You may change the scope of the match via the optional third argument:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;path&#x2f;to&#x2f;file.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wholename&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;path&#x2f;to&#x2f;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;path&#x2f;to&#x2f;two&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;wholename&quot;</span><span class="token punctuation">]</span></div><p>Finally, you may specify case insensitive evaluation by using <code>iname</code> instead
of <code>name</code>.</p><p>Starting in version 2.9.9, on OS X systems where the watched root is a case
insensitive filesystem (this is the common case for OS X), <code>name</code> is equivalent
to <code>iname</code>.</p><h5><a class="anchor" name="type"></a>type <a class="hash-link" href="#type">#</a></h5><p>Evaluates as true if the type of the file matches that specified by the second
argument; this matches regular files:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">]</span></div><p>Possible types are:</p><ul><li><strong>b</strong>: block special file</li><li><strong>c</strong>: character special file</li><li><strong>d</strong>: directory</li><li><strong>f</strong>: regular file</li><li><strong>p</strong>: named pipe (fifo)</li><li><strong>l</strong>: symbolic link</li><li><strong>s</strong>: socket</li><li><strong>D</strong>: Solaris Door</li></ul><h5><a class="anchor" name="empty"></a>empty <a class="hash-link" href="#empty">#</a></h5><p>Evaluates as true if the file exists, has size 0 and is a regular file or
directory.</p><div class="prism language-javascript"><span class="token string">&quot;empty&quot;</span>
<span class="token punctuation">[</span><span class="token string">&quot;empty&quot;</span><span class="token punctuation">]</span></div><h5><a class="anchor" name="exists"></a>exists <a class="hash-link" href="#exists">#</a></h5><p>Evaluates as true if the file exists</p><div class="prism language-javascript"><span class="token string">&quot;exists&quot;</span>
<span class="token punctuation">[</span><span class="token string">&quot;exists&quot;</span><span class="token punctuation">]</span></div><h5><a class="anchor" name="since"></a>since <a class="hash-link" href="#since">#</a></h5><p>Evaluates as true if the specified time property of the file is greater than
the since value.  Note that this is not the same as the <code>since</code> generator; when
used as an expression term we are performing a straight clockspec comparison.
When used as a generator, candidate files are selected based on the <code>since</code>
time index.  The end result might or might not be the same --- in particular, if
the <code>since</code> time index is not passed in, it will be treated the same as a fresh
instance, and only files that exist will be returned. The efficiency can vary
based on the size and shape of the file tree that you are watching; it may be
cheaper to generate the candidate set of files by suffix and then check the
modification time if many files were changed since your last query.</p><p>This will yield a true value if the observed change time is more recent than
the specified clockspec (this is equivalent to specifying &quot;oclock&quot; as the third
parameter):</p><div class="prism language-javascript"> <span class="token punctuation">[</span><span class="token string">&quot;since&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c:12345:234&quot;</span><span class="token punctuation">]</span></div><p>You may specify particular fields from the filesystem metadata.  In this case
your clockspec should be a unix time value:</p><div class="prism language-javascript"> <span class="token punctuation">[</span><span class="token string">&quot;since&quot;</span><span class="token punctuation">,</span> <span class="token number">12345668</span><span class="token punctuation">,</span> <span class="token string">&quot;mtime&quot;</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token string">&quot;since&quot;</span><span class="token punctuation">,</span> <span class="token number">12345668</span><span class="token punctuation">,</span> <span class="token string">&quot;ctime&quot;</span><span class="token punctuation">]</span></div><p>You may explicitly request the observed clock values too; in these cases we&#x27;ll
accept either a timestamp or a clock value.  The <code>oclock</code> is the last observed
change clock value (observed clock) and the <code>cclock</code> is the clock value where
we first observed the file come into existence (created clock):</p><div class="prism language-javascript"> <span class="token punctuation">[</span><span class="token string">&quot;since&quot;</span><span class="token punctuation">,</span> <span class="token number">12345668</span><span class="token punctuation">,</span> <span class="token string">&quot;oclock&quot;</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token string">&quot;since&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c:1234:123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;oclock&quot;</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token string">&quot;since&quot;</span><span class="token punctuation">,</span> <span class="token number">12345668</span><span class="token punctuation">,</span> <span class="token string">&quot;cclock&quot;</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token string">&quot;since&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c:1234:2342&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cclock&quot;</span><span class="token punctuation">]</span></div><h5><a class="anchor" name="size"></a>size <a class="hash-link" href="#size">#</a></h5><p>Available since version 3.1</p><p>The size term allows the size of an existing file (not deleted) to be evaluated
using simple relational operators as described in the table below.</p><p>The size term must always be an array with 3 elements:</p><div class="prism language-javascript"> <span class="token punctuation">[</span><span class="token string">&quot;size&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gt&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span></div><p>The second parameter describes the relational operator and the third parameter
is the integer <em>operand</em> to compare against.   The example above evaluates to
<code>true</code> if the file exists and its size is greater than zero.</p><p>Possible relational operators are:</p><table><thead><tr><th>Operator</th><th>Meaning</th><th>Result</th></tr></thead><thead><tr><td><code>eq</code></td><td>Equal</td><td><code>true</code> if file exists and <code>size == operand</code></td></tr><tr><td><code>ne</code></td><td>Not Equal</td><td><code>true</code> if file exists and <code>size != operand</code></td></tr><tr><td><code>gt</code></td><td>Greater Than</td><td><code>true</code> if file exists and <code>size &gt; operand</code></td></tr><tr><td><code>ge</code></td><td>Greater Than Or Equal</td><td><code>true</code> if file exists and <code>size &gt;= operand</code></td></tr><tr><td><code>lt</code></td><td>Less Than</td><td><code>true</code> if file exists and <code>size &lt; operand</code></td></tr><tr><td><code>le</code></td><td>Less Than Or Equal</td><td><code>true</code> if file exists and <code>size &lt;= operand</code></td></tr></thead></table><h4><a class="anchor" name="dirname-and-idirname"></a>dirname and idirname <a class="hash-link" href="#dirname-and-idirname">#</a></h4><p>Available since version 3.1</p><p>The <code>dirname</code> term allows matching on the parent directory structure for a
given file.</p><p>For the examples below, given a file with a wholename (the relative path from
the project root) of <code>foo&#x2f;bar&#x2f;baz</code>, the dirname portion is <code>foo&#x2f;bar</code>.</p><p>The following two terms will match any file whose dirname is either exactly a
match for <code>foo&#x2f;bar</code> or is any child directory of <code>foo&#x2f;bar</code>.  The first of these
two is a shortcut for the second:</p><div class="prism language-javascript">  <span class="token punctuation">[</span><span class="token string">&quot;dirname&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&#x2f;bar&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token string">&quot;dirname&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&#x2f;bar&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;depth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ge&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span></div><p>The second of those terms uses a relational expression based on the depth of
the file within the specified dirname.  A file is considered to have
<code>depth == 0</code> if it is contained directly within the specified dirname.  It has
<code>depth == 1</code> if it is contained in a direct child directory of the specified
dirname, <code>depth == 2</code> if it is contained in a grand-child directory and so on.</p><p>The relational expression accepts the same relational operators as described in
the <a href="#size" target="">size term</a> above.</p><p>If you wanted to match only files that were directly in the <code>foo&#x2f;bar</code> dir:</p><div class="prism language-javascript">  <span class="token punctuation">[</span><span class="token string">&quot;dirname&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&#x2f;bar&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;depth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;eq&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span></div><p>If you wanted to match only files that were in a grand-child or deeper:</p><div class="prism language-javascript">  <span class="token punctuation">[</span><span class="token string">&quot;dirname&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&#x2f;bar&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;depth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ge&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span></div><p><code>idirname</code> is the case insensitive version of <code>dirname</code>.  If the watched root
is detected as a case insensitive fileystem, <code>dirname</code> is equivalent to <code>idirname</code>.</p><h3><a class="anchor" name="relative-roots-since-3-3"></a>Relative Roots (since 3.3) <a class="hash-link" href="#relative-roots-since-3-3">#</a></h3><p>Watchman (since 3.3) supports optionally evaluating queries with respect to a
path within a watched root. This is used with the <code>relative_root</code> parameter:</p><div class="prism language-javascript"><span class="token punctuation">[</span><span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x2f;path&#x2f;to&#x2f;watched&#x2f;root&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;relative_root&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;project1&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span></div><p>Setting a relative root results in the following modifications to queries:</p><ul><li>The <code>path</code> generator is evaluated with respect to the relative root. In the
above example, <code>&quot;path&quot;: [&quot;dir&quot;]</code> will return all files inside
<code>&#x2f;path&#x2f;to&#x2f;watched&#x2f;root&#x2f;project1&#x2f;dir</code>.</li><li>The input expression is evaluated with respect to the relative root. In the
above example, <code>&quot;expression&quot;: [&quot;match&quot;, &quot;dir&#x2f;*.txt&quot;, &quot;wholename&quot;]</code> will return
all files inside <code>&#x2f;path&#x2f;to&#x2f;watched&#x2f;root&#x2f;project1&#x2f;dir&#x2f;</code> that match the glob
<code>*.txt</code>.</li><li>Paths inside the relative root are returned with the relative root stripped
off. For example, a path <code>project1&#x2f;dir&#x2f;file.txt</code> would be returned as
<code>dir&#x2f;file.txt</code>.</li><li>Paths outside the relative root are not returned.</li></ul><p>Relative roots behave similarly to a separate Watchman watch on the
subdirectory, without any of the system overhead that that imposes. This is
useful for large repositories, where your script or tool is only interested in a
particular directory inside the repository.</p></div><div class="docs-prevnext"><a class="docs-next" href="simple-query.html">Next →</a></div></div></section><footer class="wrap"><div class="right">© 2012-2015 Facebook Inc.</div></footer></div><div id="fb-root"></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-387204-10', 'facebook.github.io');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
          </script></body></html>