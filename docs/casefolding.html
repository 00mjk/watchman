<html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>watchman | A file watching service</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="watchman | A file watching service"><meta property="og:type" content="website"><meta property="og:url" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;index.html"><meta property="og:image" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;watchman&#x2f;favicon.png"><meta property="og:description" content="A file watching service"><link rel="shortcut icon" href="&#x2f;watchman&#x2f;img&#x2f;favicon.png"><link rel="stylesheet" href="&#x2f;watchman&#x2f;css&#x2f;watchman.css"><script type="text&#x2f;javascript" src="&#x2f;&#x2f;use.typekit.net&#x2f;vqa1hcx.js"></script><script type="text&#x2f;javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="&#x2f;watchman&#x2f;">watchman</a><ul class="nav-site"><li><a href="&#x2f;watchman&#x2f;docs&#x2f;install.html" class="active">docs</a></li><li><a href="&#x2f;watchman&#x2f;support.html" class="">support</a></li><li><a href="http:&#x2f;&#x2f;github.com&#x2f;facebook&#x2f;watchman" class="">github</a></li></ul></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-section"><h3>Installation</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;install.html">Installation</a></li></ul></div><div class="nav-docs-section"><h3>Invocation</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cli-options.html">Command Line</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;config.html">Configuration Files</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;socket-interface.html">Socket Interface</a></li></ul></div><div class="nav-docs-section"><h3>Compatibility</h3><ul></ul></div><div class="nav-docs-section"><h3>Commands</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;clock.html">clock</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;find.html">find</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-config.html">get-config</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;get-sockname.html">get-sockname</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log.html">log</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;log-level.html">log-level</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;query.html">query</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;shutdown-server.html">shutdown-server</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;since.html">since</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;subscribe.html">subscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger.html">trigger</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-del.html">trigger-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;trigger-list.html">trigger-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;unsubscribe.html">unsubscribe</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;version.html">version</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch.html">watch</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-del.html">watch-del</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-del-all.html">watch-del-all</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-list.html">watch-list</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cmd&#x2f;watch-project.html">watch-project</a></li></ul></div><div class="nav-docs-section"><h3>Queries</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;clockspec.html">Clockspec</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;file-query.html">File Queries</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;simple-query.html">Simple Pattern Syntax</a></li></ul></div><div class="nav-docs-section"><h3>Internals</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;bser.html">BSER Binary Protocol</a></li><li><a style="margin-left:0;" class="active" href="&#x2f;watchman&#x2f;docs&#x2f;casefolding.html">Case-Insensitivity</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;contributing.html">Contributing</a></li><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;cookies.html">Query Synchronization</a></li></ul></div><div class="nav-docs-section"><h3>Troubleshooting</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;troubleshooting.html">Troubleshooting</a></li></ul></div><div class="nav-docs-section"><h3>Compabitility</h3><ul><li><a style="margin-left:0;" class="" href="&#x2f;watchman&#x2f;docs&#x2f;compatibility.html">Compatibility Rules</a></li></ul></div></div><div class="inner-content"><h1>Case-Insensitivity</h1><div><p>Watchman is currently completely unaware of case-insensitivity in file systems,
and does not attempt to do any case-folding of file names. On a case-insensitive
file system like Mac OS X&#x27;s <a href="https:&#x2f;&#x2f;en.wikipedia.org&#x2f;wiki&#x2f;HFS_Plus" target="_blank">HFS+</a>, this
can manifest itself in different ways:</p><ul><li>If a file <code>foo.txt</code> is renamed to <code>FOO.txt</code>, Watchman will report <code>FOO.txt</code> as
created and <code>foo.txt</code> separately as changed.</li><li>If a file <code>foo.txt</code> is removed and another file <code>FOO.txt</code> is later added,
Watchman will report <code>FOO.txt</code> as added, but it might report <code>foo.txt</code> as
either removed or changed.</li></ul><p>In general, both <code>foo.txt</code> and <code>FOO.txt</code> can be reported, sometimes with
different stat data, sometimes with the same stat data.</p><h2><a class="anchor" name="why-doesn-t-watchman-support-case-folding-properly"></a>Why doesn&#x27;t Watchman support case-folding properly? <a class="hash-link" href="#why-doesn-t-watchman-support-case-folding-properly">#</a></h2><p>One problem is that &#x27;properly&#x27; is hard to pin down. There are at least four
levels of correctness here:</p><ul><li>handle ASCII case-folding only (95% solution)</li><li>handle ASCII + accented ASCII case-folding only (98%)</li><li>full handling of current Unicode spec using a Unicode database (99%)</li><li>using the special folding table written to a hidden file on disk at file
system creation time that matches Apple&#x27;s interpretation of Unicode at the time
of the OS release + their own quirks (100%)</li></ul><p>Clients of Watchman might have their own idea of case-folding, which might or
might not be compatible with Watchman&#x27;s idea of it. So far, clients have managed
to handle case-folding outside of Watchman, with some success.</p><h2><a class="anchor" name="does-this-matter"></a>Does this matter? <a class="hash-link" href="#does-this-matter">#</a></h2><p>It depends on your application.</p><p><strong>Example 1:</strong> Your application is a build system that has a pre-baked list of
files. Your application expects files to be on disk in the correct case even on
case-insensitive file systems, and you declare that the behavior is undefined if
they aren&#x27;t. You invoke Watchman by asking it what files have changed. In this
case, Watchman should work without you having to do anything special.</p><p><strong>Example 2:</strong> Your application is a build system rule to generate CSS rules
that is run by a Watchman trigger on <code>*.scss</code>. You expect all files you care
about to end with the string <code>.scss</code> on case-insensitive file systems, and not
another variant of it like <code>.SCSS</code>. In this case, Watchman should work fine --
at most, it will provide you the same file multiple times with different case
variants. You might be dealing with that in your build system anyway.</p><p><strong>Example 3:</strong> Like example 2, except you expect <code>.SCSS</code> and other variants to
work too. In that case the only way is to explicitly add all possible variants
to the trigger rule.</p><p><strong>Example 4:</strong> You&#x27;re a source control system that has its own ideas about
case-folding that might or might not match up with the operating system&#x27;s. You
perform case-folding against an internal data structure, so that if the data
structure has <code>foo.txt</code> and the file system has <code>FOO.txt</code> you make <code>foo.txt</code>
take precedence. In that case, Watchman will tell you about both <code>FOO.txt</code> and
<code>foo.txt</code>, and it&#x27;s up to you to perform
normalization. <a href="https:&#x2f;&#x2f;bitbucket.org&#x2f;facebook&#x2f;hgwatchman" target="_blank">hgwatchman</a> just
consults the file system in the rare case that a file changes case.</p><h2><a class="anchor" name="credits"></a>Credits <a class="hash-link" href="#credits">#</a></h2><p>The levels of correctness were proposed by Matt Mackall <a href="mailto:mpm@selenic.com">mpm@selenic.com</a>.</p></div><div class="docs-prevnext"><a class="docs-next" href="cookies.html">Next →</a></div></div></section><footer class="wrap"><div class="right">© 2012-2015 Facebook Inc.</div></footer></div><div id="fb-root"></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-387204-10', 'facebook.github.io');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
          </script></body></html>