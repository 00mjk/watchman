(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{148:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(1),r=(n(0),n(209));const i={id:"simple-query",title:"Simple Pattern Syntax"},l={id:"simple-query",title:"Simple Pattern Syntax",description:"Simple patterns follow a more traditional UNIX command line approach of using",source:"@site/docs/simple-query.md",permalink:"/watchman/docs/simple-query",editUrl:"https://github.com/facebook/watchman/edit/master/website/docs/simple-query.md",sidebar:"sidebar",previous:{title:"File Queries",permalink:"/watchman/docs/file-query"},next:{title:"Source Control Aware Queries",permalink:"/watchman/docs/scm-query"}},c=[{value:"Simple Pattern syntax",id:"simple-pattern-syntax",children:[]}],o={rightToc:c};function s({components:e,...t}){return Object(r.b)("wrapper",Object(a.a)({},o,t,{components:e,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Simple patterns follow a more traditional UNIX command line approach of using\ncommand line switches to indicate the nature of the pattern match. When simple\npatterns are used, the result set unconditionally includes all core file\nmetadata fields. They are described in more detail below."),Object(r.b)("h2",{id:"simple-pattern-syntax"},"Simple Pattern syntax"),Object(r.b)("p",null,"Where you see ",Object(r.b)("inlineCode",{parentName:"p"},"[patterns]")," in the command syntax for the ",Object(r.b)("inlineCode",{parentName:"p"},"find"),", ",Object(r.b)("inlineCode",{parentName:"p"},"since")," and\n",Object(r.b)("inlineCode",{parentName:"p"},"trigger")," commands, we allow filename patterns that match according the\nfollowing rules:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"We maintain an ",Object(r.b)("em",{parentName:"li"},"inclusion")," and an ",Object(r.b)("em",{parentName:"li"},"exclusion")," list. As the arguments are\nprocessed we'll accumulate them in one or the other. By default they are\naccumulated into the ",Object(r.b)("em",{parentName:"li"},"inclusion")," list."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"-X")," causes any subsequent items to be placed into the ",Object(r.b)("em",{parentName:"li"},"exclusion")," list"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"-I")," causes any subsequent items to be placed into the ",Object(r.b)("em",{parentName:"li"},"inclusion")," list"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"--")," indicates the end of the set of patterns"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"-p")," indicates that the following pattern should use ",Object(r.b)("inlineCode",{parentName:"li"},"pcre")," as the\nexpression term. This is reset after generating the next term."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"-P")," indicates that the following pattern should use ",Object(r.b)("inlineCode",{parentName:"li"},"ipcre")," as the\nexpression term and perform a case insensitive match. This is reset after\ngenerating the next term."),Object(r.b)("li",{parentName:"ul"},"If neither ",Object(r.b)("inlineCode",{parentName:"li"},"-p")," nor ",Object(r.b)("inlineCode",{parentName:"li"},"-P")," were used, the generated term will use ",Object(r.b)("inlineCode",{parentName:"li"},"match")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"!")," followed by a space followed by a pattern will negate the sense of the\npattern match generating a ",Object(r.b)("inlineCode",{parentName:"li"},"not")," term.")),Object(r.b)("p",null,'Any elements in the inclusion list will match; they are composed together\nusing an "anyof" term.'),Object(r.b)("p",null,"The inclusion list and exclusion lists are composed using the logic\n",Object(r.b)("inlineCode",{parentName:"p"},"(NOT anyof exclusion) AND (anyof inclusion)"),"."),Object(r.b)("p",null,"For example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{})," '*.c'\n")),Object(r.b)("p",null,"Generates a file expression:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'["match", "*.c", "wholename"]\n')),Object(r.b)("p",null,"A list:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),"'*.js' '*.css'\n")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'["anyof", ["match", "*.js", "wholename"], ["match", "*.css", "wholename"]]\n')),Object(r.b)("p",null,"An example of how the exclusion list syntax works:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{})," -X '*.c' -I '*main*'\n")),Object(r.b)("p",null,"Generates:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  "allof",\n  ["not", ["match", "*.c", "wholename"]],\n  ["match", "*main*", "wholename"]\n]\n')))}s.isMDXComponent=!0},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},b=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),b=p(n),u=a,d=b["".concat(l,".").concat(u)]||b[u]||m[u]||i;return n?r.a.createElement(d,c({ref:t},s,{components:n})):r.a.createElement(d,c({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=u;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:a,l[1]=c;for(var s=2;s<i;s++)l[s]=n[s];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);